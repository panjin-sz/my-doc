# 数据库设计规范精简版

## DB设计 十该1.	表名、字段名等必须小写，可加上下划线，如: customer、customer_order。2.	表、字段必须有注释(comment)。3.	字段设置为非空，用常量代替NULL值，比如0，-1，空字符串等值。4.	建表时统一指定 CHARSET=utf8 （移动产品CHARSET=utf8mb4）。5.	表使用id 整型自增字段为主键，关键业务表必须有唯一键。6.	表中必须包含表示记录创建时间字段，如create_time、publish_time等，同时需要加上表示记录更新时间字段，如下，该字段在数据更新时值会自动变为更新时间。updated_at  timestamp  NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE  CURRENT_TIMESTAMP7.	不经常访问的大字段必须放到单独的表中存储。8.	delete/update 语句必须包含过滤字段，insert/select 语句必须指定字段名。9.	大量数据需要更改时（更新记录超过10万行）必须事先与DBA协商。10.	统一使用count(*)做为计数 而不是count(1)、count(`主键`)、count(`字段`)。## DB设计 十不该                                                     1.	禁止图片、大文件存数据库。2.	禁止使用select *。3.	禁止in (...) 中常量超过1000个。4.	禁止在过滤条件字段上加函数，如; from_unixtime(col_time)='2014-01-01'。5.	禁止使用隐身转换 如：int_code='12345' (int_code为整型)。6.	禁止使用复杂查询、子查询和多表join，需要的话与DBA协商。7.	禁止使用set enum字段，使用tinyint代替，金融类数据禁止使用float、deouble字段，统一使用decimal。8.	不准使用select..for update/lock table等显示锁表语句，需要的话与DBA协商。9.	禁止查询产生大结果集，可以使用limit或游标。10.	禁止使用大事务（大事务指包含3个及以上SQL或执行慢的事务），必要情况联系DBA。## DDB额外注意部分1.	均衡字段类型建议使用整型；禁止更新均衡字段的值。2.	全局唯一性索引必须包含表的均衡字段，若均衡字段为字符串需说明是否区分大小写。3.	禁止union/intersect/union all等集合SQL。4.	表join时 禁止关联字段中有or 或者条件表达式，尽量使用均衡字段做关联。5.	SQL语句过滤条件尽量都包含均衡字段等值条件。6.	多个业务表预期有关联关系情况下在建表时必须告知DBA。